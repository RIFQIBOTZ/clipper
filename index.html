<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clipper Dashboard - TikTok CMS</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { 
            getFirestore, 
            collection, 
            addDoc, 
            getDocs, 
            updateDoc, 
            deleteDoc, 
            doc,
            onSnapshot,
            query,
            orderBy,
            Timestamp 
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        
        const firebaseConfig = {
            apiKey: "AIzaSyBNe-laIMMtJZioDw1Jfo95ze8D5_LVeU4",
            authDomain: "clipper-c2c21.firebaseapp.com",
            projectId: "clipper-c2c21",
            storageBucket: "clipper-c2c21.firebasestorage.app",
            messagingSenderId: "906136959982",
            appId: "1:906136959982:web:8c495597a996405f7f6cff",
            measurementId: "G-L9YC1EZLC7"
        };
        
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        
        // Make Firebase available globally
        window.firebase = {
            db,
            collection,
            addDoc,
            getDocs,
            updateDoc,
            deleteDoc,
            doc,
            onSnapshot,
            query,
            orderBy,
            Timestamp
        };
        
        console.log("Firebase initialized successfully");
    </script>
    
    <style>
        :root {
            --bg-dark: #0f0f0f;
            --sidebar-dark: #1a1a1a;
            --accent: #00d4ff;
            --accent-dark: #0099cc;
            --text-light: #e0e0e0;
            --text-gray: #a0a0a0;
            --card-bg: #1e1e1e;
            --border: #2a2a2a;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --radius: 8px;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-light);
            line-height: 1.5;
            font-size: 14px;
            overflow-x: hidden;
        }
        
        .app-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar Styles */
        .sidebar {
            width: 250px;
            background-color: var(--sidebar-dark);
            padding: 20px 0;
            position: fixed;
            height: 100vh;
            border-right: 1px solid var(--border);
            z-index: 100;
            transition: all 0.3s ease;
            overflow: hidden;
        }
        
        .sidebar.collapsed {
            width: 0;
            padding: 0;
            border-right: none;
        }
        
        .logo {
            padding: 0 20px 30px 20px;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
            overflow: hidden;
            white-space: nowrap;
        }
        
        .logo h1 {
            font-size: 24px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            overflow: hidden;
        }
        
        .logo .accent {
            color: var(--accent);
        }
        
        .menu {
            list-style: none;
            padding: 0 10px;
        }
        
        .menu-item {
            margin-bottom: 5px;
        }
        
        .menu-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            color: var(--text-light);
            text-decoration: none;
            border-radius: var(--radius);
            transition: all 0.2s ease;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
        }
        
        .menu-link:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .menu-link.active {
            background-color: rgba(0, 212, 255, 0.1);
            color: var(--accent);
            font-weight: 600;
        }
        
        .menu-link i {
            font-size: 18px;
            width: 24px;
            text-align: center;
            flex-shrink: 0;
        }
        
        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 40px;
            min-height: 100vh;
            transition: all 0.3s ease;
        }
        
        .main-content.expanded {
            margin-left: 0;
        }
        
        .top-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border);
        }
        
        .page-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .page-title h2 {
            font-size: 24px;
            font-weight: 700;
        }
        
        .page-title p {
            color: var(--text-gray);
            font-size: 16px;
        }
        
        .toggle-sidebar-btn {
            background-color: var(--card-bg);
            border: 1px solid var(--border);
            color: var(--text-light);
            width: 40px;
            height: 40px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .toggle-sidebar-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Card Styles */
        .cards-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .card-title {
            font-size: 18px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .card-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .card-subtext {
            color: var(--text-gray);
            font-size: 14px;
        }
        
        /* Progress Bar */
        .progress-bar {
            height: 8px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin-top: 15px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background-color: var(--accent);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        /* Timer Styles */
        .timer-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 15px;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius);
        }
        
        .timer-display {
            font-size: 28px;
            font-weight: 700;
            font-variant-numeric: tabular-nums;
            color: var(--accent);
        }
        
        .timer-controls {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 16px;
            border-radius: var(--radius);
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-family: 'Inter', sans-serif;
        }
        
        .btn-primary {
            background-color: var(--accent);
            color: #000;
        }
        
        .btn-primary:hover {
            background-color: var(--accent-dark);
        }
        
        .btn-secondary {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
        }
        
        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-sm {
            padding: 5px 10px;
            font-size: 13px;
        }
        
        /* Checklist Styles */
        .checklist {
            margin-top: 15px;
        }
        
        .checklist-item {
            display: flex;
            align-items: flex-start;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .checklist-item:last-child {
            border-bottom: none;
        }
        
        .checklist-checkbox {
            margin-right: 12px;
            margin-top: 3px;
        }
        
        .checklist-label {
            flex: 1;
        }
        
        .checklist-status {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 600;
        }
        
        .status-pass {
            background-color: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }
        
        .status-fail {
            background-color: rgba(239, 68, 68, 0.2);
            color: var(--danger);
        }
        
        /* Table Styles */
        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th {
            text-align: left;
            padding: 12px 15px;
            background-color: rgba(0, 0, 0, 0.2);
            font-weight: 600;
            color: var(--text-gray);
            border-bottom: 1px solid var(--border);
        }
        
        td {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        tr:hover {
            background-color: rgba(255, 255, 255, 0.02);
        }
        
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
        
        .status-live {
            background-color: var(--success);
        }
        
        .status-normal {
            background-color: var(--warning);
        }
        
        .status-dead {
            background-color: var(--danger);
        }
        
        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        
        .form-control {
            width: 100%;
            padding: 10px 15px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            color: var(--text-light);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
        }
        
        .radio-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }
        
        .radio-input {
            margin-right: 5px;
        }
        
        /* Accordion Styles */
        .accordion {
            margin-bottom: 10px;
        }
        
        .accordion-header {
            background-color: var(--card-bg);
            padding: 15px 20px;
            border-radius: var(--radius);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }
        
        .accordion-header:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .accordion-header.active {
            border-bottom-left-radius: 0;
            border-bottom-right-radius: 0;
            border-bottom: 1px solid transparent;
        }
        
        .accordion-content {
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border);
            border-top: none;
            border-bottom-left-radius: var(--radius);
            border-bottom-right-radius: var(--radius);
            display: none;
        }
        
        .accordion-content.active {
            display: block;
        }
        
        .phase-list {
            list-style-position: inside;
            margin-top: 10px;
        }
        
        .phase-list li {
            margin-bottom: 8px;
            padding-left: 10px;
        }
        
        /* Workflow Slot */
        .workflow-slot {
            margin-bottom: 30px;
        }
        
        .slot-time {
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background-color: var(--accent);
            color: #000;
            border-radius: var(--radius);
            font-weight: 600;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .cards-container {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
        }
        
        @media (max-width: 992px) {
            .sidebar {
                width: 70px;
                padding: 20px 0;
            }
            
            .sidebar:not(.collapsed) .logo h1 span:not(.accent) {
                display: none;
            }
            
            .sidebar:not(.collapsed) .menu-link span {
                display: none;
            }
            
            .sidebar:not(.collapsed) .menu-link {
                justify-content: center;
                padding: 15px;
            }
            
            .sidebar:not(.collapsed) .menu-link i {
                font-size: 20px;
            }
            
            .main-content {
                margin-left: 70px;
                padding: 30px;
            }
            
            .main-content.expanded {
                margin-left: 0;
            }
        }
        
        @media (max-width: 768px) {
            .main-content {
                padding: 20px;
            }
            
            .cards-container {
                grid-template-columns: 1fr;
            }
            
            .radio-group {
                flex-direction: column;
                gap: 10px;
            }
        }
        
        @media (max-width: 576px) {
            .main-content {
                padding: 15px;
            }
            
            .timer-container {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .timer-controls {
                width: 100%;
                justify-content: space-between;
            }
        }
        
        /* Hidden class */
        .hidden {
            display: none !important;
        }
        
        /* Loading State */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-gray);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="logo">
                <h1><i class="fas fa-scissors"></i> <span class="accent">Clipper</span><span>Dashboard</span></h1>
            </div>
            
            <ul class="menu">
                <li class="menu-item">
                    <a href="#overview" class="menu-link active" data-page="overview">
                        <i class="fas fa-home"></i>
                        <span>Overview</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#roadmap" class="menu-link" data-page="roadmap">
                        <i class="fas fa-map"></i>
                        <span>Roadmap 60 Hari</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#workflow" class="menu-link" data-page="workflow">
                        <i class="fas fa-clock"></i>
                        <span>Workflow Harian</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#checklist" class="menu-link" data-page="checklist">
                        <i class="fas fa-check-circle"></i>
                        <span>Checklist Klip</span>
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#evaluation" class="menu-link" data-page="evaluation">
                        <i class="fas fa-chart-line"></i>
                        <span>Evaluasi Mingguan</span>
                    </a>
                </li>
            </ul>
        </nav>
        
        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header dengan toggle button -->
            <div class="top-header">
                <div class="page-title">
                    <div>
                        <h2 id="page-main-title"><i class="fas fa-home"></i> Overview</h2>
                        <p id="page-subtitle">Ringkasan progress harian dan mingguan</p>
                    </div>
                </div>
                <button id="sidebar-toggle" class="toggle-sidebar-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <!-- Overview Page -->
            <section id="overview-page" class="page active">
                <div class="cards-container">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-scissors"></i>
                                <span>Klip Dipotong Hari Ini</span>
                            </div>
                            <div class="card-value" id="today-clips-cut">0</div>
                        </div>
                        <div class="card-subtext">Target: 2-3 klip/hari</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-upload"></i>
                                <span>Klip Diupload Hari Ini</span>
                            </div>
                            <div class="card-value" id="today-clips-uploaded">0</div>
                        </div>
                        <div class="card-subtext">Target: 2-3 klip/hari</div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-stopwatch"></i>
                                <span>Jam Workflow</span>
                            </div>
                            <div class="card-value" id="today-workflow-hours">0</div>
                        </div>
                        <div class="card-subtext">Target: 3-4 jam/hari</div>
                    </div>
                </div>
                
                <div class="cards-container">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-calendar-week"></i>
                                <span>Progress Minggu Ini</span>
                            </div>
                            <div class="card-value" id="week-total-clips">0</div>
                        </div>
                        <div class="card-subtext">Target: 14-21 klip/minggu</div>
                        
                        <div class="progress-bar">
                            <div class="progress-fill" id="week-progress-bar" style="width: 0%"></div>
                        </div>
                        
                        <div class="checklist" style="margin-top: 20px;">
                            <div class="checklist-item">
                                <div class="checklist-label">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <span class="status-dot status-live"></span>
                                        <span>Klip Hidup (>10k views)</span>
                                    </div>
                                </div>
                                <span id="week-live-clips">0</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <span class="status-dot status-normal"></span>
                                        <span>Klip Biasa (2k-10k views)</span>
                                    </div>
                                </div>
                                <span id="week-normal-clips">0</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <span class="status-dot status-dead"></span>
                                        <span>Klip Mati (<2k views)</span>
                                    </div>
                                </div>
                                <span id="week-dead-clips">0</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-fire"></i>
                                <span>Statistik Performa</span>
                            </div>
                        </div>
                        <div class="card-subtext" style="margin-bottom: 15px;">Rata-rata per klip</div>
                        
                        <div class="checklist">
                            <div class="checklist-item">
                                <div class="checklist-label">Total klip bulan ini</div>
                                <span id="month-total-clips">0</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">Klip dengan >10k views</div>
                                <span id="month-live-clips">0</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">Persentase hidup</div>
                                <span id="live-percentage">0%</span>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">Hari tersisa Roadmap 60 Hari</div>
                                <span id="roadmap-days-left">60</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Roadmap 60 Hari Page -->
            <section id="roadmap-page" class="page hidden">
                <div class="accordion-container">
                    <div class="accordion">
                        <div class="accordion-header" data-accordion="phase1">
                            <span>FASE 1 ‚Äî SETUP & ADAPTASI (Hari 1‚Äì7)</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content" id="phase1-content">
                            <p><strong>Tujuan:</strong> Masuk sistem, paham pola konten yang dibayar</p>
                            <br>
                            <p><strong>Task harian:</strong></p>
                            <ul class="phase-list">
                                <li>Daftar via form (1x selesai)</li>
                                <li>Follow & bookmark akun resmi + klip FYP</li>
                                <li>Riset 1‚Äì2 jam/hari:
                                    <ul>
                                        <li>Catat durasi klip (20‚Äì45 detik)</li>
                                        <li>Topik: mindset, shock value, pernyataan kontroversial, realita pahit</li>
                                        <li>Hook 3 detik pertama</li>
                                    </ul>
                                </li>
                            </ul>
                            <br>
                            <div style="background-color: rgba(239, 68, 68, 0.1); padding: 15px; border-radius: var(--radius); border-left: 4px solid var(--danger); margin-top: 15px;">
                                <p><strong>‚ö†Ô∏è Peringatan:</strong> Jangan potong klip random. Potong momen EMOSIONAL + STATEMENT.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="accordion">
                        <div class="accordion-header" data-accordion="phase2">
                            <span>FASE 2 ‚Äî PRODUKSI KONSISTEN (Hari 8‚Äì30)</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content" id="phase2-content">
                            <p><strong>Target:</strong> 2‚Äì3 klip/hari (¬±60‚Äì90 video/bulan)</p>
                            <br>
                            <p><strong>Workflow simpel:</strong></p>
                            <ol class="phase-list">
                                <li>Ambil source video panjang</li>
                                <li>Cari: kalimat keras, punchline, analogi nyentil</li>
                                <li>Potong 20‚Äì40 detik</li>
                                <li>Tambah: subtitle besar, highlight kata penting</li>
                                <li>Upload (jam prime)</li>
                            </ol>
                            <br>
                            <div style="background-color: rgba(0, 212, 255, 0.1); padding: 15px; border-radius: var(--radius); border-left: 4px solid var(--accent); margin-top: 15px;">
                                <p><strong>üéØ Fokus:</strong> kecepatan & konsistensi, bukan efek lebay.</p>
                            </div>
                            <br>
                            <p><strong>Jam upload aman (WIB):</strong> 11.30‚Äì13.00 atau 18.30‚Äì21.00</p>
                        </div>
                    </div>
                    
                    <div class="accordion">
                        <div class="accordion-header" data-accordion="phase3">
                            <span>FASE 3 ‚Äî OPTIMASI & SCALE (Hari 31‚Äì60)</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="accordion-content" id="phase3-content">
                            <p><strong>Evaluasi mingguan:</strong></p>
                            <ul class="phase-list">
                                <li>Klip mana: tembus 10k, tembus 50k, mati total</li>
                                <li>Duplikasi pola yang tembus (bukan topiknya)</li>
                            </ul>
                            <br>
                            <p><strong>Naik level:</strong></p>
                            <ul class="phase-list">
                                <li>Batch editing</li>
                                <li>Template subtitle</li>
                                <li>Preset font & warna</li>
                            </ul>
                            <br>
                            <p><strong>Target akhir 60 hari:</strong> Sistem kerja otomatis dengan minimal 3 klip hidup per minggu</p>
                        </div>
                    </div>
                </div>
                
                <div class="card" style="margin-top: 30px;">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-chart-line"></i>
                            <span>Progress Roadmap Anda</span>
                        </div>
                    </div>
                    <div class="card-subtext" style="margin-bottom: 15px;">Hari ke-<span id="current-day">1</span> dari 60 hari</div>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" id="roadmap-progress-bar" style="width: 2%"></div>
                    </div>
                    
                    <div class="checklist" style="margin-top: 20px;">
                        <div class="checklist-item">
                            <div class="checklist-label">Fase saat ini</div>
                            <span id="current-phase">FASE 1 ‚Äî SETUP & ADAPTASI</span>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-label">Hari tersisa di fase ini</div>
                            <span id="phase-days-left">7</span>
                        </div>
                        <div class="checklist-item">
                            <div class="checklist-label">Klip dibuat total</div>
                            <span id="total-clips-made">0</span>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Workflow Harian Page -->
            <section id="workflow-page" class="page hidden">
                <div class="workflow-container">
                    <!-- Slot 1 -->
                    <div class="card workflow-slot">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-search"></i>
                                <span>SLOT 1 ‚Äî RISET & SCANNING</span>
                            </div>
                            <div class="slot-time">‚è∞ Waktu ideal: 08.30‚Äì10.00 atau 09.00‚Äì10.30</div>
                        </div>
                        
                        <div class="timer-container">
                            <div class="timer-display" id="timer-1">60:00</div>
                            <div class="timer-controls">
                                <button class="btn btn-primary" id="start-1">
                                    <i class="fas fa-play"></i> Start
                                </button>
                                <button class="btn btn-secondary" id="pause-1" disabled>
                                    <i class="fas fa-pause"></i> Pause
                                </button>
                                <button class="btn btn-secondary" id="reset-1">
                                    <i class="fas fa-redo"></i> Reset
                                </button>
                            </div>
                        </div>
                        
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="slot1-check1">
                                <label class="checklist-label" for="slot1-check1">Buka video panjang (Akademi Crypto/Timothy Ronald)</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="slot1-check2">
                                <label class="checklist-label" for="slot1-check2">Tandai menit yang: nyentil, kontra arus, statement keras, realita pahit</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Slot 2 -->
                    <div class="card workflow-slot">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-filter"></i>
                                <span>SLOT 2 ‚Äî SELEKSI & PENENTUAN KLIP</span>
                            </div>
                            <div class="slot-time">Target: Pilih 2‚Äì3 klip terbaik</div>
                        </div>
                        
                        <div class="timer-container">
                            <div class="timer-display" id="timer-2">30:00</div>
                            <div class="timer-controls">
                                <button class="btn btn-primary" id="start-2">
                                    <i class="fas fa-play"></i> Start
                                </button>
                                <button class="btn btn-secondary" id="pause-2" disabled>
                                    <i class="fas fa-pause"></i> Pause
                                </button>
                                <button class="btn btn-secondary" id="reset-2">
                                    <i class="fas fa-redo"></i> Reset
                                </button>
                            </div>
                        </div>
                        
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="slot2-check1">
                                <label class="checklist-label" for="slot2-check1">Pilih klip dengan ‚â•3 dari 4 kriteria (<a href="#checklist" class="menu-link" style="display: inline; padding: 0; color: var(--accent);">link ke halaman Checklist</a>)</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="slot2-check2">
                                <label class="checklist-label" for="slot2-check2">Catat topik + durasi target (20‚Äì40 detik)</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Slot 3 -->
                    <div class="card workflow-slot">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-cut"></i>
                                <span>SLOT 3 ‚Äî EDITING</span>
                            </div>
                            <div class="slot-time">Target: 2‚Äì3 klip jadi</div>
                        </div>
                        
                        <div class="timer-container">
                            <div class="timer-display" id="timer-3">90:00</div>
                            <div class="timer-controls">
                                <button class="btn btn-primary" id="start-3">
                                    <i class="fas fa-play"></i> Start
                                </button>
                                <button class="btn btn-secondary" id="pause-3" disabled>
                                    <i class="fas fa-pause"></i> Pause
                                </button>
                                <button class="btn btn-secondary" id="reset-3">
                                    <i class="fas fa-redo"></i> Reset
                                </button>
                            </div>
                        </div>
                        
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="slot3-check1">
                                <label class="checklist-label" for="slot3-check1"><strong>Format wajib:</strong> Rasio 9:16, Durasi 20‚Äì40 detik, Subtitle besar kontras</label>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">
                                    <p><strong>Struktur klip:</strong></p>
                                    <ul style="margin-left: 20px; margin-top: 5px;">
                                        <li>0‚Äì2 detik: hook (kalimat paling nyentil)</li>
                                        <li>3‚Äì20 detik: isi inti</li>
                                        <li>20‚Äì35 detik: penutup reflektif/klimaks</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Slot 4 -->
                    <div class="card workflow-slot">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-upload"></i>
                                <span>SLOT 4 ‚Äî UPLOAD & DISTRIBUSI</span>
                            </div>
                            <div class="slot-time">‚è∞ Jam upload: 11.30‚Äì13.00 atau 18.30‚Äì21.00</div>
                        </div>
                        
                        <div class="timer-container">
                            <div class="timer-display" id="timer-4">20:00</div>
                            <div class="timer-controls">
                                <button class="btn btn-primary" id="start-4">
                                    <i class="fas fa-play"></i> Start
                                </button>
                                <button class="btn btn-secondary" id="pause-4" disabled>
                                    <i class="fas fa-pause"></i> Pause
                                </button>
                                <button class="btn btn-secondary" id="reset-4">
                                    <i class="fas fa-redo"></i> Reset
                                </button>
                            </div>
                        </div>
                        
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="slot4-check1">
                                <label class="checklist-label" for="slot4-check1">Caption: 1 kalimat pendek + provokatif</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="slot4-check2">
                                <label class="checklist-label" for="slot4-check2">Hashtag: 3‚Äì5 saja, niche related</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="slot4-check3">
                                <label class="checklist-label" for="slot4-check3">Upload sesuai jam prime</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Slot 5 -->
                    <div class="card workflow-slot">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-chart-bar"></i>
                                <span>SLOT 5 ‚Äî CEK CEPAT</span>
                            </div>
                            <div class="slot-time">‚è∞ 21.30‚Äì22.00</div>
                        </div>
                        
                        <div class="timer-container">
                            <div class="timer-display" id="timer-5">10:00</div>
                            <div class="timer-controls">
                                <button class="btn btn-primary" id="start-5">
                                    <i class="fas fa-play"></i> Start
                                </button>
                                <button class="btn btn-secondary" id="pause-5" disabled>
                                    <i class="fas fa-pause"></i> Pause
                                </button>
                                <button class="btn btn-secondary" id="reset-5">
                                    <i class="fas fa-redo"></i> Reset
                                </button>
                            </div>
                        </div>
                        
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="slot5-check1">
                                <label class="checklist-label" for="slot5-check1">Cek view 1 jam pertama</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="slot5-check2">
                                <label class="checklist-label" for="slot5-check2">Catat: klip A hidup | klip B mati</label>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Checklist Klip Page -->
            <section id="checklist-page" class="page hidden">
                <div class="cards-container">
                    <!-- Kriteria A -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span style="font-size: 24px;">üî•</span>
                                <span>A. KALIMAT PEMUKA (3 detik pertama)</span>
                            </div>
                        </div>
                        
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="criteria-a1">
                                <label class="checklist-label" for="criteria-a1">Apakah kalimat pertama langsung nusuk?</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="criteria-a2">
                                <label class="checklist-label" for="criteria-a2">Bisa berdiri tanpa konteks?</label>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">
                                    <span class="checklist-status status-pass">LULUS</span>
                                    <span style="margin-left: 10px;">Ada pernyataan tegas/pahit/kontra arus</span>
                                </div>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">
                                    <span class="checklist-status status-fail">GAGAL</span>
                                    <span style="margin-left: 10px;">Basa-basi, pengantar, "jadi gini ya‚Ä¶"</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Kriteria B -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span style="font-size: 24px;">üß†</span>
                                <span>B. ISI INTI (10‚Äì30 detik)</span>
                            </div>
                        </div>
                        
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="criteria-b1">
                                <label class="checklist-label" for="criteria-b1">Ada 1 ide utama yang bisa diringkas 1 kalimat?</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="criteria-b2">
                                <label class="checklist-label" for="criteria-b2">Ada insight praktis atau tamparan realita?</label>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">
                                    <span class="checklist-status status-pass">LULUS</span>
                                    <span style="margin-left: 10px;">Penonton dapat "oh" atau "anjir"</span>
                                </div>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">
                                    <span class="checklist-status status-fail">GAGAL</span>
                                    <span style="margin-left: 10px;">Penjelasan datar, edukatif doang</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Kriteria C -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span style="font-size: 24px;">‚ö°</span>
                                <span>C. EMOSI / ENERGI</span>
                            </div>
                        </div>
                        
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="criteria-c1">
                                <label class="checklist-label" for="criteria-c1">Nada suara naik?</label>
                            </div>
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="criteria-c2">
                                <label class="checklist-label" for="criteria-c2">Ada tekanan di kata-kata tertentu?</label>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">
                                    <span class="checklist-status status-pass">LULUS</span>
                                    <span style="margin-left: 10px;">Emosi kebaca walau tanpa video</span>
                                </div>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">
                                    <span class="checklist-status status-fail">GAGAL</span>
                                    <span style="margin-left: 10px;">Monoton, kayak baca buku</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Kriteria D -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span style="font-size: 24px;">‚è±Ô∏è</span>
                                <span>D. DURASI IDEAL</span>
                            </div>
                        </div>
                        
                        <div class="checklist">
                            <div class="checklist-item">
                                <input type="checkbox" class="checklist-checkbox" id="criteria-d1">
                                <label class="checklist-label" for="criteria-d1">Bisa dipadatkan jadi 20‚Äì40 detik?</label>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">
                                    <span class="checklist-status status-pass">LULUS</span>
                                    <span style="margin-left: 10px;">Bisa dipotong tanpa kehilangan makna</span>
                                </div>
                            </div>
                            <div class="checklist-item">
                                <div class="checklist-label">
                                    <span class="checklist-status status-fail">GAGAL</span>
                                    <span style="margin-left: 10px;">Butuh konteks panjang</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Decision Result -->
                <div class="card" style="margin-top: 30px;">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-balance-scale"></i>
                            <span>KEPUTUSAN</span>
                        </div>
                    </div>
                    
                    <div style="padding: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <div>
                                <h3 style="margin-bottom: 10px;">Total Poin Terpenuhi: <span id="total-points">0</span>/4</h3>
                                <p style="color: var(--text-gray);">LULUS ‚Üí ‚â•3 dari 4 poin terpenuhi | SKIP ‚Üí ‚â§2 poin terpenuhi</p>
                            </div>
                            <div id="decision-result" style="font-size: 24px; font-weight: 700; color: var(--accent);">
                                BELUM DIPUTUSKAN
                            </div>
                        </div>
                        
                        <div class="progress-bar">
                            <div class="progress-fill" id="checklist-progress" style="width: 0%"></div>
                        </div>
                        
                        <div style="margin-top: 30px; background-color: rgba(0, 212, 255, 0.05); padding: 20px; border-radius: var(--radius); border-left: 4px solid var(--accent);">
                            <h4 style="margin-bottom: 10px;"><i class="fas fa-lightbulb"></i> Contoh:</h4>
                            <p><strong>‚úÖ LAYAK:</strong> "Kalau gaji lo naik tapi gaya hidup ikut naik, itu bukan naik kelas, itu jalan di tempat."</p>
                            <p style="margin-top: 10px;"><strong>‚ùå TIDAK LAYAK:</strong> "Jadi kita harus memahami dulu konsep inflasi sebelum investasi‚Ä¶"</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Evaluasi Mingguan Page -->
            <section id="evaluation-page" class="page hidden">
                <div class="cards-container">
                    <div class="card" style="grid-column: span 2;">
                        <div class="card-header">
                            <div class="card-title">
                                <i class="fas fa-plus-circle"></i>
                                <span>Tambah Data Klip Baru</span>
                            </div>
                        </div>
                        
                        <div style="padding: 20px;">
                            <form id="clip-form">
                                <div class="form-group">
                                    <label class="form-label" for="clip-title">Judul Klip</label>
                                    <input type="text" class="form-control" id="clip-title" placeholder="Contoh: 'Gaji Naik Tapi Gaya Hidup Ikut Naik'" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="clip-views">View Count</label>
                                    <input type="number" class="form-control" id="clip-views" placeholder="Contoh: 12500" min="0" required>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Status</label>
                                    <div class="radio-group">
                                        <label class="radio-label">
                                            <input type="radio" class="radio-input" name="status" value="live" required>
                                            <span class="status-dot status-live"></span>
                                            <span>Hidup (>10k)</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" class="radio-input" name="status" value="normal" required>
                                            <span class="status-dot status-normal"></span>
                                            <span>Biasa (2k-10k)</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" class="radio-input" name="status" value="dead" required>
                                            <span class="status-dot status-dead"></span>
                                            <span>Mati (<2k)</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label" for="clip-notes">Catatan (opsional)</label>
                                    <textarea class="form-control" id="clip-notes" rows="3" placeholder="Contoh: Hook kuat, durasi 38 detik, upload jam 12.30 WIB"></textarea>
                                </div>
                                
                                <button type="submit" class="btn btn-primary" style="width: 100%;">
                                    <i class="fas fa-save"></i> Simpan Data Klip
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <div class="card" style="margin-top: 30px;">
                    <div class="card-header">
                        <div class="card-title">
                            <i class="fas fa-table"></i>
                            <span>Data Klip Minggu Ini</span>
                        </div>
                        <button class="btn btn-secondary" id="refresh-data">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                    
                    <div class="table-container">
                        <table id="clips-table">
                            <thead>
                                <tr>
                                    <th>Judul Klip</th>
                                    <th>View</th>
                                    <th>Status</th>
                                    <th>Catatan</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="clips-table-body">
                                <!-- Data akan dimuat dari Firebase -->
                                <tr>
                                    <td colspan="5" class="loading">Belum ada data. Tambahkan data baru di atas.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
        </main>
    </div>
    
    <!-- Notification Element -->
    <div class="notification" id="notification">
        Timer selesai! Waktunya pindah ke slot berikutnya.
    </div>
    
    <script>
        // Application State
        const appState = {
            currentPage: 'overview',
            timers: {
                'timer-1': { time: 60 * 60, running: false, interval: null },
                'timer-2': { time: 30 * 60, running: false, interval: null },
                'timer-3': { time: 90 * 60, running: false, interval: null },
                'timer-4': { time: 20 * 60, running: false, interval: null },
                'timer-5': { time: 10 * 60, running: false, interval: null }
            },
            checklistState: {},
            dailyProgress: {
                clipsCut: 0,
                clipsUploaded: 0,
                workflowHours: 0
            },
            weeklyData: [],
            roadmapDay: 1
        };
        
        // DOM Elements
        const pages = document.querySelectorAll('.page');
        const menuLinks = document.querySelectorAll('.menu-link');
        const accordionHeaders = document.querySelectorAll('.accordion-header');
        const notification = document.getElementById('notification');
        const sidebar = document.querySelector('.sidebar');
        const mainContent = document.querySelector('.main-content');
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const pageMainTitle = document.getElementById('page-main-title');
        const pageSubtitle = document.getElementById('page-subtitle');
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Check if Firebase is loaded
            if (!window.firebase) {
                console.error("Firebase not loaded, using localStorage fallback");
                initLocalStorageFallback();
            }
            
            // Setup navigation
            setupNavigation();
            
            // Setup accordions
            setupAccordions();
            
            // Setup timers
            setupTimers();
            
            // Setup checklist listeners
            setupChecklistListeners();
            
            // Setup evaluation form
            setupEvaluationForm();
            
            // Setup sidebar toggle
            setupSidebarToggle();
            
            // Load saved data
            loadSavedData();
            
            // Calculate roadmap progress
            updateRoadmapProgress();
            
            // Request notification permission
            requestNotificationPermission();
            
            // Update UI with initial data
            updateOverview();
            updateChecklistDecision();
        });
        
        // LocalStorage fallback if Firebase fails
        function initLocalStorageFallback() {
            console.log("Initializing localStorage fallback");
            // Load data from localStorage
            const savedProgress = localStorage.getItem('dailyProgress');
            const savedChecklist = localStorage.getItem('checklistState');
            const savedWeeklyData = localStorage.getItem('weeklyData');
            
            if (savedProgress) {
                appState.dailyProgress = JSON.parse(savedProgress);
            }
            
            if (savedChecklist) {
                appState.checklistState = JSON.parse(savedChecklist);
            }
            
            if (savedWeeklyData) {
                appState.weeklyData = JSON.parse(savedWeeklyData);
            }
        }
        
        // Save data to localStorage
        function saveToLocalStorage() {
            localStorage.setItem('dailyProgress', JSON.stringify(appState.dailyProgress));
            localStorage.setItem('checklistState', JSON.stringify(appState.checklistState));
            localStorage.setItem('weeklyData', JSON.stringify(appState.weeklyData));
        }
        
        // Setup page navigation
        function setupNavigation() {
            menuLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active menu item
                    menuLinks.forEach(item => item.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show selected page
                    const pageId = this.getAttribute('data-page');
                    showPage(pageId);
                });
            });
        }
        
        // Show selected page
        function showPage(pageId) {
            // Hide all pages
            pages.forEach(page => page.classList.add('hidden'));
            
            // Show selected page
            const pageElement = document.getElementById(`${pageId}-page`);
            if (pageElement) {
                pageElement.classList.remove('hidden');
                appState.currentPage = pageId;
                
                // Update page title
                updatePageTitle(pageId);
                
                // Load data for the page if needed
                if (pageId === 'evaluation') {
                    loadWeeklyData();
                }
            }
        }
        
        // Update page title based on current page
        function updatePageTitle(pageId) {
            const titles = {
                'overview': { main: '<i class="fas fa-home"></i> Overview', subtitle: 'Ringkasan progress harian dan mingguan' },
                'roadmap': { main: '<i class="fas fa-map"></i> Roadmap 60 Hari', subtitle: '3 fase perjalanan menjadi clipper TikTok profesional' },
                'workflow': { main: '<i class="fas fa-clock"></i> Workflow Harian', subtitle: '5 slot waktu produktif dengan timer dan checklist' },
                'checklist': { main: '<i class="fas fa-check-circle"></i> Checklist Klip', subtitle: '4 kriteria untuk menilai kelayakan potongan klip (10 detik)' },
                'evaluation': { main: '<i class="fas fa-chart-line"></i> Evaluasi Mingguan', subtitle: 'Form input dan tabel data evaluasi performa klip' }
            };
            
            if (titles[pageId]) {
                pageMainTitle.innerHTML = titles[pageId].main;
                pageSubtitle.textContent = titles[pageId].subtitle;
            }
        }
        
        // Setup accordion functionality
        function setupAccordions() {
            accordionHeaders.forEach(header => {
                header.addEventListener('click', function() {
                    const accordionId = this.getAttribute('data-accordion');
                    const content = document.getElementById(`${accordionId}-content`);
                    const icon = this.querySelector('i');
                    
                    // Toggle active class
                    this.classList.toggle('active');
                    content.classList.toggle('active');
                    
                    // Rotate icon
                    if (this.classList.contains('active')) {
                        icon.style.transform = 'rotate(180deg)';
                    } else {
                        icon.style.transform = 'rotate(0deg)';
                    }
                });
            });
        }
        
        // Setup timers for workflow slots
        function setupTimers() {
            // Setup each timer
            for (let i = 1; i <= 5; i++) {
                const timerId = `timer-${i}`;
                const startBtn = document.getElementById(`start-${i}`);
                const pauseBtn = document.getElementById(`pause-${i}`);
                const resetBtn = document.getElementById(`reset-${i}`);
                
                // Load saved time if exists
                const savedTime = localStorage.getItem(timerId);
                if (savedTime) {
                    appState.timers[timerId].time = parseInt(savedTime);
                }
                
                // Update display
                updateTimerDisplay(timerId);
                
                // Start button
                startBtn.addEventListener('click', () => {
                    startTimer(timerId);
                });
                
                // Pause button
                pauseBtn.addEventListener('click', () => {
                    pauseTimer(timerId);
                });
                
                // Reset button
                resetBtn.addEventListener('click', () => {
                    resetTimer(timerId);
                });
            }
        }
        
        // Start a timer
        function startTimer(timerId) {
            const timer = appState.timers[timerId];
            
            if (timer.running) return;
            
            timer.running = true;
            
            // Update button states
            document.getElementById(`start-${timerId.slice(-1)}`).disabled = true;
            document.getElementById(`pause-${timerId.slice(-1)}`).disabled = false;
            
            // Start countdown
            timer.interval = setInterval(() => {
                timer.time--;
                updateTimerDisplay(timerId);
                localStorage.setItem(timerId, timer.time.toString());
                
                // Check if timer reached zero
                if (timer.time <= 0) {
                    clearInterval(timer.interval);
                    timer.running = false;
                    
                    // Show notification
                    showNotification(`Timer ${timerId.slice(-1)} selesai!`);
                    
                    // Send browser notification
                    sendNotification(`Slot ${timerId.slice(-1)} selesai`, 'Waktunya pindah ke slot berikutnya.');
                    
                    // Update button states
                    document.getElementById(`start-${timerId.slice(-1)}`).disabled = false;
                    document.getElementById(`pause-${timerId.slice(-1)}`).disabled = true;
                    
                    // Update daily workflow hours
                    updateWorkflowHours(timerId);
                }
            }, 1000);
        }
        
        // Pause a timer
        function pauseTimer(timerId) {
            const timer = appState.timers[timerId];
            
            if (!timer.running) return;
            
            timer.running = false;
            clearInterval(timer.interval);
            
            // Update button states
            document.getElementById(`start-${timerId.slice(-1)}`).disabled = false;
            document.getElementById(`pause-${timerId.slice(-1)}`).disabled = true;
        }
        
        // Reset a timer
        function resetTimer(timerId) {
            const timer = appState.timers[timerId];
            
            // Stop timer if running
            if (timer.running) {
                clearInterval(timer.interval);
                timer.running = false;
            }
            
            // Reset to initial time based on timer ID
            let initialTime = 60 * 60; // 60 minutes default
            
            switch(timerId) {
                case 'timer-1': initialTime = 60 * 60; break; // 60 minutes
                case 'timer-2': initialTime = 30 * 60; break; // 30 minutes
                case 'timer-3': initialTime = 90 * 60; break; // 90 minutes
                case 'timer-4': initialTime = 20 * 60; break; // 20 minutes
                case 'timer-5': initialTime = 10 * 60; break; // 10 minutes
            }
            
            timer.time = initialTime;
            updateTimerDisplay(timerId);
            localStorage.removeItem(timerId);
            
            // Update button states
            document.getElementById(`start-${timerId.slice(-1)}`).disabled = false;
            document.getElementById(`pause-${timerId.slice(-1)}`).disabled = true;
        }
        
        // Update timer display
        function updateTimerDisplay(timerId) {
            const timer = appState.timers[timerId];
            const display = document.getElementById(timerId);
            
            if (!display) return;
            
            const minutes = Math.floor(timer.time / 60);
            const seconds = timer.time % 60;
            
            display.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Update daily workflow hours based on completed timers
        function updateWorkflowHours(timerId) {
            let hoursToAdd = 0;
            
            // Calculate hours based on timer
            switch(timerId) {
                case 'timer-1': hoursToAdd = 1.5; break; // 90 minutes
                case 'timer-2': hoursToAdd = 0.5; break; // 30 minutes
                case 'timer-3': hoursToAdd = 1.5; break; // 90 minutes
                case 'timer-4': hoursToAdd = 0.33; break; // 20 minutes
                case 'timer-5': hoursToAdd = 0.17; break; // 10 minutes
            }
            
            appState.dailyProgress.workflowHours += hoursToAdd;
            updateOverview();
            saveToLocalStorage();
        }
        
        // Setup checklist listeners
        function setupChecklistListeners() {
            // Workflow checklist items
            const workflowCheckboxes = document.querySelectorAll('.workflow-slot input[type="checkbox"]');
            workflowCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const id = this.id;
                    const isChecked = this.checked;
                    
                    // Update checklist state
                    appState.checklistState[id] = isChecked;
                    
                    // Update daily progress if checklist is related to clips
                    if (id.includes('slot3-check')) {
                        appState.dailyProgress.clipsCut = Array.from(workflowCheckboxes)
                            .filter(cb => cb.id.includes('slot3-check') && cb.checked)
                            .length;
                    }
                    
                    if (id.includes('slot4-check')) {
                        appState.dailyProgress.clipsUploaded = Array.from(workflowCheckboxes)
                            .filter(cb => cb.id.includes('slot4-check') && cb.checked)
                            .length;
                    }
                    
                    updateOverview();
                    saveToLocalStorage();
                });
            });
            
            // Criteria checklist items
            const criteriaCheckboxes = document.querySelectorAll('#checklist-page input[type="checkbox"]');
            criteriaCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateChecklistDecision);
            });
        }
        
        // Update checklist decision
        function updateChecklistDecision() {
            const criteriaCheckboxes = document.querySelectorAll('#checklist-page input[type="checkbox"]');
            const checkedCount = Array.from(criteriaCheckboxes).filter(cb => cb.checked).length;
            
            // Update total points
            document.getElementById('total-points').textContent = checkedCount;
            
            // Update progress bar
            const progressBar = document.getElementById('checklist-progress');
            const progressPercentage = (checkedCount / 4) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            
            // Update decision
            const decisionElement = document.getElementById('decision-result');
            if (checkedCount >= 3) {
                decisionElement.textContent = "‚úÖ LAYAK DIPOTONG";
                decisionElement.style.color = "var(--success)";
            } else if (checkedCount === 0) {
                decisionElement.textContent = "BELUM DIPUTUSKAN";
                decisionElement.style.color = "var(--accent)";
            } else {
                decisionElement.textContent = "‚ùå SKIP / CARI YANG LAIN";
                decisionElement.style.color = "var(--danger)";
            }
        }
        
        // Setup evaluation form
        function setupEvaluationForm() {
            const form = document.getElementById('clip-form');
            const refreshBtn = document.getElementById('refresh-data');
            
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const clipTitle = document.getElementById('clip-title').value;
                const clipViews = parseInt(document.getElementById('clip-views').value);
                const clipStatus = document.querySelector('input[name="status"]:checked').value;
                const clipNotes = document.getElementById('clip-notes').value;
                
                // Create clip object
                const clip = {
                    title: clipTitle,
                    views: clipViews,
                    status: clipStatus,
                    notes: clipNotes,
                    date: new Date().toISOString()
                };
                
                // Save to Firebase or localStorage
                if (window.firebase) {
                    try {
                        await window.firebase.addDoc(window.firebase.collection(window.firebase.db, "weekly_evaluation"), clip);
                        showNotification("Data klip berhasil disimpan ke Firebase!");
                    } catch (error) {
                        console.error("Error saving to Firebase:", error);
                        // Fallback to localStorage
                        appState.weeklyData.push(clip);
                        saveToLocalStorage();
                        showNotification("Data klip berhasil disimpan (local)!");
                    }
                } else {
                    appState.weeklyData.push(clip);
                    saveToLocalStorage();
                    showNotification("Data klip berhasil disimpan!");
                }
                
                // Reset form
                form.reset();
                
                // Reload data
                loadWeeklyData();
                updateOverview();
            });
            
            // Refresh button
            if (refreshBtn) {
                refreshBtn.addEventListener('click', loadWeeklyData);
            }
        }
        
        // Load weekly evaluation data
        async function loadWeeklyData() {
            const tableBody = document.getElementById('clips-table-body');
            
            if (!tableBody) return;
            
            // Show loading state
            tableBody.innerHTML = '<tr><td colspan="5" class="loading">Memuat data...</td></tr>';
            
            try {
                let clips = [];
                
                // Try to load from Firebase first
                if (window.firebase) {
                    try {
                        const querySnapshot = await window.firebase.getDocs(
                            window.firebase.collection(window.firebase.db, "weekly_evaluation")
                        );
                        
                        clips = querySnapshot.docs.map(doc => ({
                            id: doc.id,
                            ...doc.data()
                        }));
                        
                        console.log("Loaded data from Firebase:", clips.length, "clips");
                    } catch (firebaseError) {
                        console.error("Error loading from Firebase:", firebaseError);
                        // Fallback to localStorage
                        clips = appState.weeklyData;
                    }
                } else {
                    // Use localStorage data
                    clips = appState.weeklyData;
                }
                
                // Clear table
                tableBody.innerHTML = '';
                
                if (clips.length === 0) {
                    tableBody.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 40px; color: var(--text-gray);">Belum ada data klip. Tambahkan data baru di atas.</td></tr>';
                    return;
                }
                
                // Sort by date (newest first)
                clips.sort((a, b) => new Date(b.date) - new Date(a.date));
                
                // Add rows to table
                clips.forEach(clip => {
                    const row = document.createElement('tr');
                    
                    // Status indicator
                    let statusText = '';
                    let statusClass = '';
                    
                    switch(clip.status) {
                        case 'live':
                            statusText = 'üü¢ Hidup';
                            statusClass = 'status-live';
                            break;
                        case 'normal':
                            statusText = 'üü° Biasa';
                            statusClass = 'status-normal';
                            break;
                        case 'dead':
                            statusText = 'üî¥ Mati';
                            statusClass = 'status-dead';
                            break;
                    }
                    
                    row.innerHTML = `
                        <td>${clip.title}</td>
                        <td>${clip.views.toLocaleString()}</td>
                        <td>
                            <div class="status-indicator">
                                <span class="status-dot ${statusClass}"></span>
                                <span>${statusText}</span>
                            </div>
                        </td>
                        <td>${clip.notes || '-'}</td>
                        <td>
                            <button class="btn btn-secondary btn-sm" onclick="editClip('${clip.id || 'local'}')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deleteClip('${clip.id || 'local'}')">
                                <i class="fas fa-trash"></i> Hapus
                            </button>
                        </td>
                    `;
                    
                    tableBody.appendChild(row);
                });
                
                // Update overview with new data
                updateOverview();
                
            } catch (error) {
                console.error("Error loading weekly data:", error);
                tableBody.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 40px; color: var(--danger);">Error memuat data. Coba refresh halaman.</td></tr>';
            }
        }
        
        // Edit clip function
        window.editClip = function(clipId) {
            alert(`Edit fitur untuk klip ${clipId} akan dikembangkan lebih lanjut.`);
        };
        
        // Delete clip function
        window.deleteClip = async function(clipId) {
            if (!confirm("Apakah Anda yakin ingin menghapus data klip ini?")) return;
            
            try {
                // Delete from Firebase if it's a Firebase ID
                if (clipId !== 'local' && window.firebase) {
                    await window.firebase.deleteDoc(window.firebase.doc(window.firebase.db, "weekly_evaluation", clipId));
                    showNotification("Data klip berhasil dihapus dari Firebase!");
                } else {
                    // Delete from localStorage
                    appState.weeklyData = appState.weeklyData.filter(clip => clip.id !== clipId);
                    saveToLocalStorage();
                    showNotification("Data klip berhasil dihapus!");
                }
                
                // Reload data
                loadWeeklyData();
                updateOverview();
                
            } catch (error) {
                console.error("Error deleting clip:", error);
                showNotification("Error menghapus data klip", true);
            }
        };
        
        // Load saved data
        function loadSavedData() {
            // Load checklist state
            Object.keys(appState.checklistState).forEach(id => {
                const checkbox = document.getElementById(id);
                if (checkbox) {
                    checkbox.checked = appState.checklistState[id];
                }
            });
            
            // Load weekly data if not using Firebase
            if (!window.firebase) {
                // Don't load sample data - start fresh
            }
        }
        
        // Update overview page
        function updateOverview() {
            // Update today's progress
            document.getElementById('today-clips-cut').textContent = appState.dailyProgress.clipsCut;
            document.getElementById('today-clips-uploaded').textContent = appState.dailyProgress.clipsUploaded;
            document.getElementById('today-workflow-hours').textContent = appState.dailyProgress.workflowHours.toFixed(1);
            
            // Calculate weekly stats from weeklyData
            let weeklyClips = appState.weeklyData.length;
            let liveClips = 0;
            let normalClips = 0;
            let deadClips = 0;
            
            appState.weeklyData.forEach(clip => {
                switch(clip.status) {
                    case 'live': liveClips++; break;
                    case 'normal': normalClips++; break;
                    case 'dead': deadClips++; break;
                }
            });
            
            // Update weekly stats
            document.getElementById('week-total-clips').textContent = weeklyClips;
            document.getElementById('week-live-clips').textContent = liveClips;
            document.getElementById('week-normal-clips').textContent = normalClips;
            document.getElementById('week-dead-clips').textContent = deadClips;
            
            // Update progress bar (target: 14-21 clips per week)
            const weeklyProgress = weeklyClips > 0 ? Math.min((weeklyClips / 21) * 100, 100) : 0;
            document.getElementById('week-progress-bar').style.width = `${weeklyProgress}%`;
            
            // Update monthly stats (approximation: weekly * 4)
            document.getElementById('month-total-clips').textContent = weeklyClips * 4;
            document.getElementById('month-live-clips').textContent = liveClips * 4;
            
            // Calculate live percentage
            const livePercentage = weeklyClips > 0 ? Math.round((liveClips / weeklyClips) * 100) : 0;
            document.getElementById('live-percentage').textContent = `${livePercentage}%`;
            
            // Update total clips made
            document.getElementById('total-clips-made').textContent = Math.max(appState.dailyProgress.clipsCut, weeklyClips);
        }
        
        // Update roadmap progress
        function updateRoadmapProgress() {
            // Calculate days (for demo, we'll use a fixed day 1)
            const currentDay = 1;
            const totalDays = 60;
            
            // Update display
            document.getElementById('current-day').textContent = currentDay;
            document.getElementById('roadmap-days-left').textContent = totalDays - currentDay + 1;
            
            // Update progress bar
            const progressPercentage = (currentDay / totalDays) * 100;
            document.getElementById('roadmap-progress-bar').style.width = `${progressPercentage}%`;
            
            // Determine current phase
            let currentPhase = "FASE 1 ‚Äî SETUP & ADAPTASI";
            let phaseDaysLeft = 7 - currentDay + 1;
            
            if (currentDay > 7 && currentDay <= 30) {
                currentPhase = "FASE 2 ‚Äî PRODUKSI KONSISTEN";
                phaseDaysLeft = 30 - currentDay + 1;
            } else if (currentDay > 30) {
                currentPhase = "FASE 3 ‚Äî OPTIMASI & SCALE";
                phaseDaysLeft = 60 - currentDay + 1;
            }
            
            document.getElementById('current-phase').textContent = currentPhase;
            document.getElementById('phase-days-left').textContent = phaseDaysLeft;
        }
        
        // Setup sidebar toggle
        function setupSidebarToggle() {
            // Load saved sidebar state
            const sidebarCollapsed = localStorage.getItem('sidebar-collapsed') === 'true';
            
            if (sidebarCollapsed) {
                sidebar.classList.add('collapsed');
                mainContent.classList.add('expanded');
                updateToggleIcon(true);
            }
            
            // Toggle sidebar on button click
            sidebarToggle.addEventListener('click', () => {
                sidebar.classList.toggle('collapsed');
                mainContent.classList.toggle('expanded');
                
                const isCollapsed = sidebar.classList.contains('collapsed');
                updateToggleIcon(isCollapsed);
                
                // Save state to localStorage
                localStorage.setItem('sidebar-collapsed', isCollapsed);
            });
        }
        
        // Update toggle button icon
        function updateToggleIcon(isCollapsed) {
            const icon = sidebarToggle.querySelector('i');
            if (isCollapsed) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        }
        
        // Show notification
        function showNotification(message, isError = false) {
            const notification = document.getElementById('notification');
            
            if (isError) {
                notification.style.backgroundColor = 'var(--danger)';
            } else {
                notification.style.backgroundColor = 'var(--accent)';
            }
            
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Send browser notification
        function sendNotification(title, body) {
            if (!("Notification" in window)) {
                console.log("Browser tidak mendukung notifikasi");
                return;
            }
            
            if (Notification.permission === "granted") {
                new Notification(title, { body });
            }
        }
        
        // Request notification permission
        function requestNotificationPermission() {
            if (!("Notification" in window)) {
                console.log("Browser tidak mendukung notifikasi");
                return;
            }
            
            if (Notification.permission === "default") {
                Notification.requestPermission().then(permission => {
                    if (permission === "granted") {
                        console.log("Notification permission granted");
                    }
                });
            }
        }
        
        // Make functions available globally for button onclick handlers
        window.editClip = editClip;
        window.deleteClip = deleteClip;
    </script>
</body>
</html>